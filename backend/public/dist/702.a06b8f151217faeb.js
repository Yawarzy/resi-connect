"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[702],{2702:(Q,d,i)=>{i.r(d),i.d(d,{ContractUploadModule:()=>w});var u=i(6895),c=i(5263),g=i(3900),s=i(433),p=i(529),t=i(4650),m=i(9320),f=i(1913),l=i(5635);function h(n,r){1&n&&(t.TgZ(0,"div"),t._uU(1," Signed contract is required. "),t.qZA())}function _(n,r){1&n&&(t.TgZ(0,"div"),t._uU(1," Please upload a PDF file. "),t.qZA())}function C(n,r){if(1&n&&(t.TgZ(0,"div",13),t.YNc(1,h,2,0,"div",2),t.YNc(2,_,2,0,"div",2),t.qZA()),2&n){const e=t.oxw(2);let o,a;t.xp6(1),t.Q6J("ngIf",null==(o=e.form.get("signed_contract"))||null==o.errors?null:o.errors.required),t.xp6(1),t.Q6J("ngIf",null==(a=e.form.get("signed_contract"))||null==a.errors?null:a.errors.invalid)}}function v(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"div",4)(3,"h1",5),t._uU(4,"Upload Signed Contract"),t.qZA(),t.TgZ(5,"p",6),t._uU(6," Please upload the signed contract below to complete the process of renting the room. "),t.qZA(),t.TgZ(7,"form",7),t.NdJ("ngSubmit",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleSubmit())}),t.TgZ(8,"nz-input-group")(9,"input",8),t.NdJ("change",function(a){t.CHM(e);const J=t.oxw();return t.KtG(J.onFileChange(a))}),t.qZA()(),t.TgZ(10,"small",9),t._uU(11," Please upload a PDF file. "),t.qZA(),t.YNc(12,C,3,2,"div",10),t.TgZ(13,"div",11)(14,"button",12),t._uU(15," Upload "),t.qZA()()()()(),t.BQk()}if(2&n){const e=t.oxw();let o;t.xp6(7),t.Q6J("formGroup",e.form),t.xp6(5),t.Q6J("ngIf",(null==(o=e.form.get("signed_contract"))?null:o.invalid)&&((null==(o=e.form.get("signed_contract"))?null:o.dirty)||(null==(o=e.form.get("signed_contract"))?null:o.touched)))}}function U(n,r){1&n&&(t.ynx(0),t.TgZ(1,"div",14)(2,"div",15)(3,"span",16),t._uU(4,"Submitting..."),t.qZA()(),t.TgZ(5,"span",17),t._uU(6,"Submitting..."),t.qZA()(),t.BQk())}function y(n,r){1&n&&(t.ynx(0),t.TgZ(1,"div",18)(2,"h4",19),t._UZ(3,"i",20),t._uU(4," Contract uploaded successfully! "),t.qZA(),t.TgZ(5,"p"),t._uU(6," Thank you for submitting your signed contract. You'll receive a confirmation email with your credentials once the contract is verified. "),t.qZA()(),t.BQk())}function x(n,r){1&n&&(t.ynx(0),t.TgZ(1,"div",21)(2,"h4",19),t._UZ(3,"i",22),t._uU(4," Something went wrong! "),t.qZA(),t.TgZ(5,"p"),t._uU(6," It seems like something went wrong while uploading your contract. Please try again later. If the problem persists, please contact us. "),t.qZA()(),t.BQk())}function Z(n,r){1&n&&(t.ynx(0),t.TgZ(1,"div",23)(2,"h4",19),t._UZ(3,"i",22),t._uU(4," Link expired! "),t.qZA(),t.TgZ(5,"p"),t._uU(6," The link you used to access this page has expired. "),t.qZA()(),t.BQk())}const T=[{path:"upload/:slug",component:(()=>{class n{constructor(e,o){this.enquiryService=e,this.activatedRoute=o,this.subscriptions=[],this.contractSigned=!1,this.expiredLink=!1,this.selectedFile=null,this.loading=!1,this.success=null,this.form=new s.cw({signed_contract:new s.NI(null,[s.kI.required])}),this.subscriptions.push(this.activatedRoute.params.pipe((0,g.w)(a=>this.enquiryService.isContractSigned(a.slug))).subscribe(a=>{this.contractSigned=a.contract_signed,this.expiredLink=this.contractSigned}))}ngOnInit(){}ngOnDestroy(){this.subscriptions.forEach(e=>{e.unsubscribe()})}handleSubmit(){if(this.form.invalid)return this.form.controls.signed_contract.markAsTouched(),void this.form.controls.signed_contract.markAsDirty();if("application/pdf"!==this.selectedFile?.type)return this.form.controls.signed_contract.setErrors({invalid:!0}),this.form.controls.signed_contract.markAsTouched(),void this.form.controls.signed_contract.markAsDirty();this.loading=!0;const e=new FormData;e.append("signed_contract",this.selectedFile),e.append("slug",this.activatedRoute.snapshot.params.slug);const o=new p.WM({Accept:"application/json"});this.subscriptions.push(this.enquiryService.uploadContract(e,o).subscribe(a=>{this.contractSigned=!0,setTimeout(()=>{this.loading=!1,this.success=!0},2e3)},a=>{console.error(a),setTimeout(()=>{this.contractSigned=!1,this.loading=!1,this.success=!1},2e3)}))}onFileChange(e){if(e.target.files.length>0){const o=e.target.files[0];this.form.get("signed_contract")?.setValue(o.name),this.selectedFile=o}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.Y),t.Y36(c.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-contract-upload"]],decls:7,vars:6,consts:[[3,"showNavItems"],[1,"container"],[4,"ngIf"],[1,"card","mx-auto","my-5","p-3",2,"min-width","20rem","max-width","50rem"],[1,"card-body"],[1,"card-title","fs-3"],[1,"card-text"],[3,"formGroup","ngSubmit"],["id","signedContract","nz-input","","type","file",1,"form-control",3,"change"],[1,"form-text","text-muted"],["class","text-danger mt-2",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-primary","mt-4"],[1,"text-danger","mt-2"],[1,"status-container","bg-light","py-4","my-4"],["role","status",1,"spinner-border","text-success"],[1,"visually-hidden"],[1,"text-gray","text-success","mt-2"],["role","alert",1,"alert","alert-success","my-4","w-100"],[1,"alert-heading"],[1,"fa","fa-check-circle",2,"color","darkgreen"],["role","alert",1,"alert","alert-danger","my-4","w-100"],[1,"fa","fa-times-circle",2,"color","darkred"],["role","alert",1,"alert","alert-danger","my-5","w-100"]],template:function(e,o){1&e&&(t.TgZ(0,"app-page",0)(1,"div",1),t.YNc(2,v,16,2,"ng-container",2),t.YNc(3,U,7,0,"ng-container",2),t.YNc(4,y,7,0,"ng-container",2),t.YNc(5,x,7,0,"ng-container",2),t.YNc(6,Z,7,0,"ng-container",2),t.qZA()()),2&e&&(t.Q6J("showNavItems",!1),t.xp6(2),t.Q6J("ngIf",!o.loading&&!o.contractSigned&&null===o.success),t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",o.success),t.xp6(1),t.Q6J("ngIf",!1===o.success),t.xp6(1),t.Q6J("ngIf",o.expiredLink))},dependencies:[u.O5,f.I,l.Zp,l.gB,s._Y,s.JL,s.sg],styles:["[_nghost-%COMP%]   .status-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:10rem;border-radius:4px}"]}),n})()}];let A=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.Bz.forChild(T),c.Bz]}),n})();var S=i(7723),b=i(6704),I=i(3679);let w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,A,S.B,b.U5,I.Jb,l.o7,s.UX]}),n})()}}]);